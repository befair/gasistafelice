<!DOCTYPE html>
<html ng-app="ngGF" ng-controller='AppController as app'>
  <head>

    <title>Gasista Felice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <!-- Bootstrap -->
    <link href="/ui/css/style.css" rel="stylesheet">  
    <link href="/ui/css/font-awesome.css" rel="stylesheet">

    <!-- a cosa serve questo css di una vecchia versione di jQueryUI -->

    <link rel="stylesheet" href="/ui/css/ngDialog.min.css">
    <link rel="stylesheet" href="/ui/css/ngDialog-theme-default.css">
    <link rel="stylesheet" href="/ui/css/ngDialog-theme-flat.css">
    <link rel="stylesheet" href="/ui/css/ngDialog-custom.css">
    <link rel="stylesheet" href="/ui/bower_components/leaflet/dist/leaflet.css">
    <!--<link href="//fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Oswald:300' rel='stylesheet' type='text/css'>-->
    <!-- <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700|Montserrat:700|Pacifico" rel="stylesheet" type="text/css">  
    -->

    <!--
    ******************
    Credits go to: http://opensourcehacker.com/2012/01/09/zoom-on-orientation-change-fix-for-mobile-browsers-mobilizing-websites-with-responsive-design-and-html5-part-8/
    ******************


    Don't break scale on iPad rotate.
    By default iPad re-zooms the page when the device orientation changes.
    The heuristics here do not work always; our page got zoomed in
    though it should be max zoomed out.
    This snippet fixes the situation so that you can still zoom in, but when
    the device is rotated the scale is restored.

    -->
      
    <script type="text/javascript">
      (function(doc) {

          var addEvent = 'addEventListener',
              type = 'gesturestart',
              qsa = 'querySelectorAll',
              scales = [1, 1],
              meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];

          function fix() {
              meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
              doc.removeEventListener(type, fix, true);
          }

          if ((meta = meta[meta.length - 1]) && addEvent in doc) {
              fix();
              scales = [.25, 1.6];
              doc[addEvent](type, fix, true);
          }

      }(document));

    </script>


  </head>
  <body>
  <div id="wrap">
     
      <nav class="userbar" role="navigation">
          <div class="logo" ng-if="app.isAuth()"> 
             <a class="waves-effect waves-light" href="" ng-click="app.logout()">QUIT</a>
          </div>
          
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navhead">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="brandname">
              <a href="http://www.befair.it" target="_blank" title="beFair: sostenere lo sviluppo dei territori">
                  <img src="/ui/img/befair.png" alt="beFair: sostenere lo sviluppo dei territori" class="imglogo">
              </a>
          </div>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> <!-- ng-controller="gas_controller" --> 
          
            <div ng-show="app.dataLoaded" class="navbar-left">
                <ul class="optionlist nav navbar-nav">
                    <li ng-repeat="gas in person.gas_list | orderBy: gas.name" class="{{ gas.ui_status }} "> 
                        <a href="#"> <!-- ng-click="getID({{gas.pk}});" --> {{ gas.name }} </a>
                    </li>
                </ul>
                <ul class="optionlist nav navbar-nav">
                  <li markable>
                      <a ng-link="order()" href=""> <i class="fa fa-book"></i>Ordinare </a>
                  </li>

                 <li markable>
                     <a ng-link="basket()" href=""> <i class="fa fa-shopping-cart"></i>Paniere </a> 
                 </li>
                  <li markable>
                      <a ng-link="cash()" href=""> <i class="fa fa-user"></i>Conto </a>
                  </li>     
                </ul>
                       
            </div>

         <div ng-show="app.dataLoaded" class="navbar-right">
             <a class="navpic" ng-link="profile()" href="">
                 <img src="/ui/img/user_pic.png" alt="..." class="imgpic">
             </a>
             <a class="titlenav" ng-link="profile()" href=""> Ciao {{ person.display_name }} </a>
        </div>    
          
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="cont-gas"> <!-- Container -->
        <div ng-if="app.dataLoaded" id="cashresume">
            <h2>Il tuo saldo nel {{ gas.name }}</h2>
            <div id="cashresume-body">
            Attuale: <span class="balance">&#8364; {{ gm.balance | currency }}</span><br />
            Dopo la consegna: <span class="balance">&#8364; {{ gm.balance - gm.total_basket_to_be_delivered - gm.total_basket | currency}}</span><br />
            </div>

        </div>
        <!-- 1° row -->
                                
        <p style="text-align:center" ng-hide="app.dataLoaded" ng-if="app.isAuth()">
            Un attimo che carico...
            <i class="fa fa-spinner fa-spin"></i>
        </p>  

        <div ng-if="app.dataLoaded" class="first_block"><!-- 1° col-md-8 -->
            <div class="tab-content tab-gas">
                
                <!-- this is where content will be injected -->
                <div ng-viewport> </div>
            </div>
        </div><!-- /1° col-md-8 -->

        <div ng-if="!app.isAuth()" class="first_block"><!-- 1° col-md-8 -->
                <h4>Login</h4>
                <!-- TODO @veon82 <li><a href="/#/signup">Sign up</a></li> -->
                <div class="row">
                    <form class="col s12">
                        <div class="row">
                            <div class="input-field col s12">
                                <input ng-model="app.username" id="username" type="text" class="validate">
                                <label for="username">Username</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12">
                                <input ng-model="app.password" id="password" type="password" class="validate">
                                <label for="password">Password</label>
                            </div>
                        </div>
                    </form>
                </div>
                <a ng-click="app.login()" href="#" class="waves-effect waves-blue-grey waves-grey-blue btn modal-action modal-close">GO</a>
        </div><!-- /1° col-md-8 -->

        <!-- 1° row -->

      </div> <!-- /Container -->


    </div><!-- /Wrap -->
    

    <div id="footer">
        <div class="container">
            <p class="text-muted">GASISTA FELICE v{{ appVersion }}</p>
        </div>
    </div> 


    <script src="/ui/bower_components/angular/angular.min.js"></script>
    <script src="/ui/bower_components/angular-new-router/dist/router.es5.min.js"></script>
    <script src="/ui/bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>
    <script src="/ui/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="/ui/bower_components/leaflet/dist/leaflet.js"></script>
    <script src="/ui/bower_components/satellizer/satellizer.min.js"></script>

    <script src="/ui/js/angular-locale_it-it.js"></script>        
    <script src="/ui/js/ngDialog.min.js"></script>
    <script src="/ui/js/modernizr.js"></script>
    <!-- <script src="/ui/js/local.js"></script> -->

    <script src="/ui/app.js"></script>
    <script src="/ui/components/order/order.js"></script>
    <script src="/ui/components/basket/basket.js"></script>
    <script src="/ui/components/cash/cash.js"></script>
    <script src="/ui/components/profile/profile.js"></script>

</body>
</html>
